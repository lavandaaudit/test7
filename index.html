<!-- Додатковий блок для циклу обчислень -->
<canvas id="calc" style="position:absolute; top:0; left:0; width:100%; height:100%; pointer-events:none;"></canvas>

<script>
const calcCanvas = document.getElementById('calc');
const calcCtx = calcCanvas.getContext('2d');
function resizeCalc() { calcCanvas.width = window.innerWidth; calcCanvas.height = window.innerHeight; }
window.addEventListener('resize', resizeCalc);
resizeCalc();

// Цикл обчислень, який завжди переперевіряє себе
let calcT = 0;
let calcHistory = [];
function calcLoop() {
    calcT += 0.02;

    // Очистка з невеликою прозорістю для слідів
    calcCtx.fillStyle = 'rgba(0,0,0,0.08)';
    calcCtx.fillRect(0,0,calcCanvas.width,calcCanvas.height);

    // Приклад само-перевірної формули: синус + косинус + хаотичний шум
    const centerX = calcCanvas.width/2;
    const centerY = calcCanvas.height/2;
    const points = 120;
    const chaosFactor = 0.5 + 0.5*Math.sin(calcT*0.3);

    for (let i=0; i<points; i++) {
        const angle = i/points*Math.PI*2 + calcT*0.5;
        const radius = 100 + 50*Math.sin(angle*3 + calcT*0.7) + 30*chaosFactor*Math.random();
        const x = centerX + Math.cos(angle)*radius;
        const y = centerY + Math.sin(angle)*radius;

        // Малюємо точку
        const alpha = 0.1 + 0.4*Math.abs(Math.sin(calcT + i*0.05));
        calcCtx.fillStyle = `rgba(255,255,100,${alpha.toFixed(2)})`;
        calcCtx.beginPath();
        calcCtx.arc(x,y,2 + Math.sin(calcT*1.5+i*0.1),0,Math.PI*2);
        calcCtx.fill();
    }

    // Перевірка та рекалькуляція "само-перевірки"
    calcHistory.push(Math.sin(calcT) + Math.cos(calcT*1.3));
    if (calcHistory.length > 200) calcHistory.shift();

    // Відображення графіку значень історії
    calcCtx.beginPath();
    calcCtx.moveTo(0, centerY);
    for (let i=0; i<calcHistory.length; i++) {
        const val = calcHistory[i];
        calcCtx.lineTo(i*3, centerY + val*40);
    }
    calcCtx.strokeStyle = 'rgba(0,255,255,0.5)';
    calcCtx.lineWidth = 1.2;
    calcCtx.stroke();

    requestAnimationFrame(calcLoop);
}
calcLoop();
</script>
